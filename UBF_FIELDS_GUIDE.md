# UBF Field Constants - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## –ü—Ä–æ–±–ª–µ–º–∞

UBF field ID –≤ Enduro/X - —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç—ã–µ —á–∏—Å–ª–∞, –∞ **–∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è**, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–∏–ø–µ –ø–æ–ª—è. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ–∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ (1002, 1012 –∏ —Ç.–¥.) –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ UBF API.

### –ü—Ä–∏–º–µ—Ä –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞:
```rust
const T_NAME_FLD: i32 = 1002;  // ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –ø—Ä–æ—Å—Ç–æ –Ω–æ–º–µ—Ä
```

### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥:
```rust
const T_NAME_FLD: i32 = 167773162;  // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ID —Å —Ç–∏–ø–æ–º STRING
```

## –†–µ—à–µ–Ω–∏–µ: –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç

### 1. Build Script (build.rs)

`endurox-sys/build.rs` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–∫–∞–Ω–∏—Ä—É–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `ubftab/` –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ `*.fd.h`
- –ß–∏—Ç–∞–µ—Ç –∫–∞–∂–¥—ã–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π `.fd.h` —Ñ–∞–π–ª (—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `mkfldhdr`)
- –ü–∞—Ä—Å–∏—Ç –≤—Å–µ `#define` —Å –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ field ID
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –µ–¥–∏–Ω—ã–π Rust –º–æ–¥—É–ª—å `ubf_fields.rs` –≤ `OUT_DIR`

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–∞—è —Ä–∞–±–æ—Ç–∞ —Å UBF –±—É—Ñ–µ—Ä–æ–º
```rust
use endurox_sys::ubf_fields::*;

// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —É–∂–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–∞
let mut buf = UbfBuffer::new(1024)?;
buf.add_string(T_NAME_FLD, "test")?;      // T_NAME_FLD = 167773162
buf.add_long(T_ID_FLD, 12345)?;           // T_ID_FLD = 33555444
buf.add_double(T_PRICE_FLD, 99.99)?;      // T_PRICE_FLD = 134218749
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å UbfStruct derive macro
```rust
use endurox_sys::UbfStruct;
use endurox_sys::ubf_fields::*;  // –ò–º–ø–æ—Ä—Ç –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç

#[derive(Debug, Clone, UbfStruct)]
struct Transaction {
    #[ubf(field = T_NAME_FLD)]    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
    name: String,
    
    #[ubf(field = T_ID_FLD)]      // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
    id: i64,
    
    #[ubf(field = T_PRICE_FLD)]   // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
    amount: f64,
}

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
let txn = Transaction {
    name: "Payment".to_string(),
    id: 12345,
    amount: 99.99,
};

let ubf = txn.to_ubf()?;  // –í—Å–µ field ID –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω—ã
let restored = Transaction::from_ubf(&ubf)?;
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞

–ó–∞–º–µ–Ω–∏—Ç–µ –≤—Å–µ —Ä—É—á–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç –Ω–∞ –∏–º–ø–æ—Ä—Ç:

**–ë—ã–ª–æ:**
```rust
const T_NAME_FLD: i32 = 1002;
const T_ID_FLD: i32 = 1012;
const T_PRICE_FLD: i32 = 1021;
```

**–°—Ç–∞–ª–æ:**
```rust
use endurox_sys::ubf_fields::{T_NAME_FLD, T_ID_FLD, T_PRICE_FLD};
```

## –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ Field ID

–í UBF field ID —Å–æ—Å—Ç–æ–∏—Ç –∏–∑:
- **–ù–æ–º–µ—Ä –ø–æ–ª—è** (–º–ª–∞–¥—à–∏–µ –±–∏—Ç—ã)
- **–¢–∏–ø –ø–æ–ª—è** (—Å—Ç–∞—Ä—à–∏–µ –±–∏—Ç—ã)

–ü—Ä–∏–º–µ—Ä –∏–∑ `test.fd.h`:
```c
#define T_NAME_FLD    ((BFLDID32)167773162)  /* number: 1002  type: string */
#define T_ID_FLD      ((BFLDID32)33555444)   /* number: 1012  type: long */
#define T_PRICE_FLD   ((BFLDID32)134218749)  /* number: 1021  type: double */
```

## –¢–∏–ø—ã –ø–æ–ª–µ–π –∏ –∏—Ö –∫–æ–¥—ã

| –¢–∏–ø      | –ö–æ–¥ | –ü—Ä–∏–º–µ—Ä field ID      |
|----------|-----|----------------------|
| SHORT    | 0   | 1030                 |
| LONG     | 1   | 33555444 (1012)      |
| CHAR     | 2   | 67109904 (1040)      |
| FLOAT    | 3   | -                    |
| DOUBLE   | 4   | 134218749 (1021)     |
| STRING   | 5   | 167773162 (1002)     |
| CARRAY   | 6   | -                    |

## –ü—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏

1. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è C –∑–∞–≥–æ–ª–æ–≤–∫–∞:**
   ```bash
   cd ubftab
   mkfldhdr test.fd  # –°–æ–∑–¥–∞–µ—Ç test.fd.h
   ```

2. **Build script –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
   - –ü—Ä–∏ `cargo build` —á–∏—Ç–∞–µ—Ç `test.fd.h`
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `$OUT_DIR/ubf_fields.rs`

3. **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑:**
   ```rust
   use endurox_sys::ubf_fields::*;
   ```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π

### –í —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª:

1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `ubftab/test.fd`:
   ```
   T_NEW_FIELD    100  string  -  "New field"
   ```

2. –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫:
   ```bash
   cd ubftab && mkfldhdr test.fd
   ```

3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
   ```bash
   cargo clean && cargo build
   ```

4. –ù–æ–≤–∞—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `T_NEW_FIELD` –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–∞

### –ù–æ–≤—ã–π —Ñ–∞–π–ª field definitions:

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª `ubftab/custom.fd`:
   ```
   $#ifndef _CUSTOM_FD
   $#define _CUSTOM_FD
   
   *base 2000
   
   CUSTOM_FIELD_1    1  string  -  "Custom field"
   CUSTOM_FIELD_2    2  long    -  "Custom ID"
   
   $#endif
   ```

2. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫:
   ```bash
   cd ubftab && mkfldhdr custom.fd
   ```

3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ:
   ```bash
   cargo clean && cargo build
   ```

4. –í—Å–µ –ø–æ–ª—è –∏–∑ `custom.fd.h` –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `ubf_fields` –º–æ–¥—É–ª—å

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å Derive Macro

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç —Å `UbfStruct` derive macro –¥–∞–µ—Ç:

‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤** - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏  
‚úÖ **–ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ IDE** - –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–ª—è –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É  
‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ** - field ID –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–∏–ø–µ  
‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `.fd` —Ñ–∞–π–ª–∞—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ  
‚úÖ **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞** - `T_NAME_FLD` –ø–æ–Ω—è—Ç–Ω–µ–µ —á–µ–º `167773162`  

### –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞:

1. **–û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–ª—è –≤ `ubftab/test.fd`:**
   ```
   T_ORDER_ID     50  long    -  "Order ID"
   T_ORDER_NAME   51  string  -  "Order name"
   T_ORDER_TOTAL  52  double  -  "Order total"
   ```

2. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫:**
   ```bash
   cd ubftab && mkfldhdr test.fd
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–µ–º –≤ Rust –∫–æ–¥–µ:**
   ```rust
   use endurox_sys::UbfStruct;
   use endurox_sys::ubf_fields::*;
   
   #[derive(Debug, Clone, UbfStruct)]
   struct Order {
       #[ubf(field = T_ORDER_ID)]
       id: i64,
       
       #[ubf(field = T_ORDER_NAME)]
       name: String,
       
       #[ubf(field = T_ORDER_TOTAL)]
       total: f64,
   }
   ```

4. **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

‚ö†Ô∏è **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç—ã–µ –Ω–æ–º–µ—Ä–∞** (1002, 1012 –∏ —Ç.–¥.) –Ω–∞–ø—Ä—è–º—É—é  
‚úÖ **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–∑ `ubf_fields` –º–æ–¥—É–ª—è  
‚úÖ **–° derive macro** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –∞—Ç—Ä–∏–±—É—Ç–∞—Ö `#[ubf(field = ...)]`  
üîÑ **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** `test.fd` –∏–ª–∏ `test.fd.h`  
üìù **–ù–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ** —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª `ubf_fields.rs` –≤—Ä—É—á–Ω—É—é

## Troubleshooting

### –û—à–∏–±–∫–∞: "test.fd.h not found"
```bash
cd ubftab && mkfldhdr test.fd
```

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
```bash
cargo clean
cd ubftab && mkfldhdr test.fd
cargo build
```

### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª–µ–π
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, –∞ –Ω–µ —Å—Ç–∞—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:
```rust
// ‚ùå –°—Ç–∞—Ä—ã–π –∫–æ–¥ - —É–¥–∞–ª–∏—Ç—å
const T_NAME_FLD: i32 = 1002;

// ‚úÖ –ù–æ–≤—ã–π –∫–æ–¥
use endurox_sys::ubf_fields::T_NAME_FLD;
```
