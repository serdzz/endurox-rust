# Переход на Diesel ORM - В процессе

⚠️ **ВНИМАНИЕ**: Миграция на Diesel ORM частично завершена но требует доработки.

## Статус изменений

### ✅ Завершено:
1. Добавлены зависимости Diesel в Cargo.toml
2. Создан diesel.toml
3. Созданы миграции (up.sql/down.sql)
4. Обновлен schema.rs с Diesel table definitions
5. Обновлен models.rs с Queryable/Insertable derive macros
6. Обновлен db.rs для Diesel connection pool

### ❌ Требует доработки:
1. **services.rs** - необходимо переписать все SQL запросы на Diesel query builder
2. **main.rs** - возможно потребуется обновление импортов
3. **Тестирование** - проверить работу всех endpoints

## Проблемы

Diesel ORM для Oracle имеет ограниченную поддержку и может вызвать сложности:

1. **diesel** crate не имеет официальной поддержки Oracle
2. Сторонние крейты (diesel-oci) могут быть устаревшими
3. Native Oracle driver (`oracle` crate) может быть более надежным решением

## Рекомендации

### Вариант 1: Завершить миграцию на Diesel
- Переписать services.rs с Diesel queries
- Может потребовать значительное время на отладку
- Риск несовместимости с Oracle

### Вариант 2: Откатиться на Native Oracle Driver
- Более стабильное решение
- Уже работало и протестировано
- Бенчмарки показали хорошую производительность

## Откат на Native Driver

Если нужен откат:

```bash
git revert HEAD  # Отменить последние изменения
# Или восстановить из коммита beb1070 (до Diesel)
```

Файлы для отката видны в git log.
